<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Eagle Harbor AI Assistant</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary-color: #0C4C2C;
            --secondary-color: #1a3a5a;
            --accent-color: #c4a962;
            --teal-color: #4a9db5;
            --text-dark: #2c3e50;
            --text-light: #6c757d;
            --background-light: #f8f9fa;
            --white: #ffffff;
            --success-color: #28a745;
            --error-color: #dc3545;
            --shadow: 0 4px 20px rgba(0,0,0,0.1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: linear-gradient(135deg, #e3f2fd 0%, #ffffff 100%);
            min-height: 100vh;
        }

        /* Chatbot Toggle Button */
        .chatbot-toggle {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 60px;
            height: 60px;
            background: var(--primary-color);
            border: none;
            border-radius: 50%;
            color: white;
            font-size: 24px;
            cursor: pointer;
            box-shadow: var(--shadow);
            z-index: 1000;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .chatbot-toggle:hover {
            background: var(--secondary-color);
            transform: scale(1.1);
        }

        .chatbot-toggle.active {
            background: var(--error-color);
        }

        /* Chatbot Container */
        .chatbot-container {
            position: fixed;
            bottom: 90px;
            right: 20px;
            width: 380px;
            height: 500px;
            background: white;
            border-radius: 15px;
            box-shadow: var(--shadow);
            z-index: 999;
            transform: translateY(100%) scale(0.8);
            opacity: 0;
            transition: all 0.3s ease;
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }

        .chatbot-container.active {
            transform: translateY(0) scale(1);
            opacity: 1;
        }

        /* Chatbot Header */
        .chatbot-header {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            padding: 20px;
            text-align: center;
            position: relative;
        }

        .chatbot-header h3 {
            margin: 0;
            font-size: 18px;
            font-weight: 600;
        }

        .chatbot-header p {
            margin: 5px 0 0 0;
            font-size: 14px;
            opacity: 0.9;
        }

        .chatbot-close {
            position: absolute;
            top: 15px;
            right: 15px;
            background: none;
            border: none;
            color: white;
            font-size: 20px;
            cursor: pointer;
            opacity: 0.8;
            transition: opacity 0.3s ease;
        }

        .chatbot-close:hover {
            opacity: 1;
        }

        /* Chat Messages */
        .chat-messages {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
            background: var(--background-light);
        }

        .message {
            margin-bottom: 15px;
            display: flex;
            align-items: flex-start;
            gap: 10px;
        }

        .message.user {
            flex-direction: row-reverse;
        }

        .message-avatar {
            width: 35px;
            height: 35px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
            flex-shrink: 0;
        }

        .message.bot .message-avatar {
            background: var(--primary-color);
            color: white;
        }

        .message.user .message-avatar {
            background: var(--accent-color);
            color: white;
        }

        .message-content {
            max-width: 70%;
            padding: 12px 16px;
            border-radius: 18px;
            font-size: 14px;
            line-height: 1.4;
        }

        .message.bot .message-content {
            background: white;
            color: var(--text-dark);
            border-bottom-left-radius: 5px;
        }

        .message.user .message-content {
            background: var(--primary-color);
            color: white;
            border-bottom-right-radius: 5px;
        }

        /* Typing Indicator */
        .typing-indicator {
            display: none;
            padding: 12px 16px;
            background: white;
            border-radius: 18px;
            border-bottom-left-radius: 5px;
            max-width: 70%;
        }

        .typing-indicator.active {
            display: block;
        }

        .typing-dots {
            display: flex;
            gap: 4px;
        }

        .typing-dot {
            width: 8px;
            height: 8px;
            background: var(--text-light);
            border-radius: 50%;
            animation: typing 1.4s infinite ease-in-out;
        }

        .typing-dot:nth-child(2) {
            animation-delay: 0.2s;
        }

        .typing-dot:nth-child(3) {
            animation-delay: 0.4s;
        }

        @keyframes typing {
            0%, 60%, 100% {
                transform: translateY(0);
                opacity: 0.4;
            }
            30% {
                transform: translateY(-10px);
                opacity: 1;
            }
        }

        /* Chat Input */
        .chat-input-container {
            padding: 20px;
            background: white;
            border-top: 1px solid #eee;
        }

        .chat-input-wrapper {
            display: flex;
            gap: 10px;
            align-items: center;
        }

        .chat-input {
            flex: 1;
            padding: 12px 16px;
            border: 2px solid #eee;
            border-radius: 25px;
            font-size: 14px;
            outline: none;
            transition: border-color 0.3s ease;
        }

        .chat-input:focus {
            border-color: var(--primary-color);
        }

        .chat-send {
            width: 40px;
            height: 40px;
            background: var(--primary-color);
            border: none;
            border-radius: 50%;
            color: white;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .chat-send:hover {
            background: var(--secondary-color);
            transform: scale(1.1);
        }

        .chat-send:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
        }

        /* Quick Actions */
        .quick-actions {
            padding: 10px 20px 0;
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }

        .quick-action {
            background: var(--background-light);
            border: 1px solid #ddd;
            border-radius: 20px;
            padding: 8px 12px;
            font-size: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            color: var(--text-dark);
        }

        .quick-action:hover {
            background: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }

        /* Responsive Design */
        @media (max-width: 480px) {
            .chatbot-container {
                width: calc(100vw - 40px);
                height: calc(100vh - 140px);
                right: 20px;
                left: 20px;
            }
        }

        /* Scrollbar Styling */
        .chat-messages::-webkit-scrollbar {
            width: 6px;
        }

        .chat-messages::-webkit-scrollbar-track {
            background: transparent;
        }

        .chat-messages::-webkit-scrollbar-thumb {
            background: #ddd;
            border-radius: 3px;
        }

        .chat-messages::-webkit-scrollbar-thumb:hover {
            background: #bbb;
        }
    </style>
</head>
<body>
    <!-- Chatbot Toggle Button -->
    <button class="chatbot-toggle" id="chatbotToggle">
        <i class="fas fa-comments"></i>
    </button>

    <!-- Chatbot Container -->
    <div class="chatbot-container" id="chatbotContainer">
        <!-- Header -->
        <div class="chatbot-header">
            <button class="chatbot-close" id="chatbotClose">
                <i class="fas fa-times"></i>
            </button>
            <h3>Eagle Harbor Assistant</h3>
            <p>Ask me about our community!</p>
        </div>

        <!-- Quick Actions -->
        <div class="quick-actions">
            <button class="quick-action" data-message="What events are coming up?">Upcoming Events</button>
            <button class="quick-action" data-message="How do I contact the board?">Contact Board</button>
            <button class="quick-action" data-message="Tell me about Eagle Harbor history">Our History</button>
            <button class="quick-action" data-message="What amenities are available?">Amenities</button>
        </div>

        <!-- Chat Messages -->
        <div class="chat-messages" id="chatMessages">
            <div class="message bot">
                <div class="message-avatar">
                    <i class="fas fa-anchor"></i>
                </div>
                <div class="message-content">
                    Welcome to Eagle Harbor! I'm your community assistant. I can help you with information about our historic waterfront community, events, board members, and more. How can I help you today?
                </div>
            </div>
        </div>

        <!-- Typing Indicator -->
        <div class="message bot" id="typingIndicator">
            <div class="message-avatar">
                <i class="fas fa-anchor"></i>
            </div>
            <div class="typing-indicator">
                <div class="typing-dots">
                    <div class="typing-dot"></div>
                    <div class="typing-dot"></div>
                    <div class="typing-dot"></div>
                </div>
            </div>
        </div>

        <!-- Input Area -->
        <div class="chat-input-container">
            <div class="chat-input-wrapper">
                <input type="text" class="chat-input" id="chatInput" placeholder="Type your message..." maxlength="500">
                <button class="chat-send" id="chatSend">
                    <i class="fas fa-paper-plane"></i>
                </button>
            </div>
        </div>
    </div>

    <script>
        class EagleHarborChatbot {
            constructor() {
                this.isOpen = false;
                this.isTyping = false;
                this.initializeElements();
                this.initializeEventListeners();
                this.initializeKnowledgeBase();
            }

            initializeElements() {
                this.toggle = document.getElementById('chatbotToggle');
                this.container = document.getElementById('chatbotContainer');
                this.closeBtn = document.getElementById('chatbotClose');
                this.messages = document.getElementById('chatMessages');
                this.input = document.getElementById('chatInput');
                this.sendBtn = document.getElementById('chatSend');
                this.typingIndicator = document.getElementById('typingIndicator');
            }

            initializeEventListeners() {
                this.toggle.addEventListener('click', () => this.toggleChat());
                this.closeBtn.addEventListener('click', () => this.closeChat());
                this.sendBtn.addEventListener('click', () => this.sendMessage());
                this.input.addEventListener('keypress', (e) => {
                    if (e.key === 'Enter') this.sendMessage();
                });

                // Quick actions
                document.querySelectorAll('.quick-action').forEach(btn => {
                    btn.addEventListener('click', () => {
                        const message = btn.getAttribute('data-message');
                        this.input.value = message;
                        this.sendMessage();
                    });
                });

                // Close on outside click
                document.addEventListener('click', (e) => {
                    if (this.isOpen && !this.container.contains(e.target) && !this.toggle.contains(e.target)) {
                        this.closeChat();
                    }
                });
            }

            initializeKnowledgeBase() {
                this.knowledgeBase = {
                    // Community Information
                    'about|history|founded|heritage': {
                        response: "Eagle Harbor is a historic African American waterfront community founded in 1929 along the Patuxent River. We're one of the few remaining communities of our kind in the United States, designated as a Sustainable Community in 2018 and recognized as a Historical Black Site in 2020.",
                        followUp: ["Tell me more about our timeline", "What makes us special?", "Who are our leaders?"]
                    },

                    // Board and Leadership
                    'board|leadership|president|mayor|commissioner': {
                        response: "Our community has two leadership bodies:\n\n**Citizens Association Board:**\n‚Ä¢ President: Janie Branson\n‚Ä¢ Vice President: Curtis Prince\n‚Ä¢ Secretary: Anthony Delaney\n‚Ä¢ Treasurer: Sabrina Littlejohn\n‚Ä¢ Sergeant of Arms: Barbara Stanard\n‚Ä¢ Parliamentarian: Bertha Guerra\n\n**Board of Commissioners:**\n‚Ä¢ Mayor: James S. Jones\n‚Ä¢ Commissioners: Alton Branson, Harold Bryant II, Patricia Crews, Donnie Littlejohn",
                        followUp: ["How do I contact the board?", "When are meetings held?", "How can I get involved?"]
                    },

                    // Contact Information
                    'contact|phone|email|address|reach': {
                        response: "üìç **Address:** 23308 Hawkins Drive, Aquasco, MD 20608-0028\nüìû **Phone:** (301) 888-2410\nüìß **Email:** info@eagleharborca.org\nüåê **Website:** townofeagleharborincmd.org",
                        followUp: ["What are office hours?", "Who should I contact for specific issues?", "How do I join meetings?"]
                    },

                    // Events and Activities
                    'events|activities|calendar|meetings|gatherings': {
                        response: "Eagle Harbor hosts regular community events throughout the year! We have town meetings, seasonal celebrations, and community gatherings. Check our events calendar on the website for the latest schedule, or contact the board for more information about upcoming activities.",
                        followUp: ["How do I RSVP for events?", "Can I suggest new events?", "What's the next big celebration?"]
                    },

                    // Amenities and Features
                    'amenities|facilities|waterfront|river|recreation': {
                        response: "üåä **Waterfront Access:** Direct access to the beautiful Patuxent River\nüö§ **Recreation:** Boating, fishing, kayaking opportunities\nüè° **Community:** Close-knit neighborhood with ~70 residents\nüåø **Environment:** Sustainable community with environmental stewardship\nüìç **Location:** Convenient to DC and Baltimore metro areas",
                        followUp: ["Are there boat slips available?", "What fishing is allowed?", "Tell me about sustainability efforts"]
                    },

                    // Living and Housing
                    'housing|living|residents|move|property': {
                        response: "Eagle Harbor is home to about 70 residents in a close-knit waterfront community. For housing availability, property information, or questions about moving to Eagle Harbor, please contact our board directly at (301) 888-2410 or info@eagleharborca.org.",
                        followUp: ["What's the community like?", "Are there any restrictions?", "How do I get involved as a new resident?"]
                    },

                    // Documents and Resources
                    'documents|bylaws|constitution|rules|regulations': {
                        response: "Important community documents including our Constitution, Bylaws, and community guidelines are available on our website. You can also request copies by contacting the board. These documents outline community standards, procedures, and resident rights and responsibilities.",
                        followUp: ["How do I access the documents?", "Can I suggest changes to bylaws?", "What are the key rules?"]
                    },

                    // Default responses for common greetings
                    'hello|hi|hey|good morning|good afternoon|good evening': {
                        response: "Hello! Welcome to Eagle Harbor! üåä I'm here to help you learn about our beautiful historic waterfront community. What would you like to know?",
                        followUp: ["Tell me about Eagle Harbor", "Who are the board members?", "What events are coming up?", "How do I get involved?"]
                    },

                    'thank|thanks|appreciate': {
                        response: "You're very welcome! I'm happy to help you learn more about our wonderful Eagle Harbor community. Is there anything else you'd like to know?",
                        followUp: ["Tell me more about our history", "How can I get involved?", "What makes Eagle Harbor special?"]
                    }
                };
            }

            toggleChat() {
                if (this.isOpen) {
                    this.closeChat();
                } else {
                    this.openChat();
                }
            }

            openChat() {
                this.isOpen = true;
                this.container.classList.add('active');
                this.toggle.classList.add('active');
                this.toggle.innerHTML = '<i class="fas fa-times"></i>';
                this.input.focus();
            }

            closeChat() {
                this.isOpen = false;
                this.container.classList.remove('active');
                this.toggle.classList.remove('active');
                this.toggle.innerHTML = '<i class="fas fa-comments"></i>';
            }

            async sendMessage() {
                const message = this.input.value.trim();
                if (!message || this.isTyping) return;

                // Add user message
                this.addMessage(message, 'user');
                this.input.value = '';
                this.sendBtn.disabled = true;

                // Show typing indicator
                this.showTyping();

                // Generate response
                setTimeout(() => {
                    const response = this.generateResponse(message);
                    this.hideTyping();
                    this.addMessage(response.text, 'bot');
                    
                    if (response.followUp && response.followUp.length > 0) {
                        this.addFollowUpButtons(response.followUp);
                    }
                    
                    this.sendBtn.disabled = false;
                }, 1000 + Math.random() * 1000); // Random delay for realism
            }

            addMessage(content, sender) {
                const messageDiv = document.createElement('div');
                messageDiv.className = `message ${sender}`;
                
                const avatar = document.createElement('div');
                avatar.className = 'message-avatar';
                avatar.innerHTML = sender === 'bot' ? '<i class="fas fa-anchor"></i>' : '<i class="fas fa-user"></i>';
                
                const messageContent = document.createElement('div');
                messageContent.className = 'message-content';
                messageContent.innerHTML = content.replace(/\n/g, '<br>');
                
                messageDiv.appendChild(avatar);
                messageDiv.appendChild(messageContent);
                
                this.messages.appendChild(messageDiv);
                this.scrollToBottom();
            }

            addFollowUpButtons(followUpOptions) {
                const followUpDiv = document.createElement('div');
                followUpDiv.className = 'message bot';
                followUpDiv.style.marginTop = '10px';
                
                const avatar = document.createElement('div');
                avatar.className = 'message-avatar';
                avatar.innerHTML = '<i class="fas fa-anchor"></i>';
                
                const buttonsContainer = document.createElement('div');
                buttonsContainer.className = 'message-content';
                buttonsContainer.style.background = 'transparent';
                buttonsContainer.style.padding = '0';
                
                const buttonsWrapper = document.createElement('div');
                buttonsWrapper.style.display = 'flex';
                buttonsWrapper.style.flexDirection = 'column';
                buttonsWrapper.style.gap = '8px';
                
                followUpOptions.forEach(option => {
                    const button = document.createElement('button');
                    button.textContent = option;
                    button.style.cssText = `
                        background: var(--primary-color);
                        color: white;
                        border: none;
                        padding: 8px 12px;
                        border-radius: 15px;
                        font-size: 12px;
                        cursor: pointer;
                        transition: all 0.3s ease;
                    `;
                    
                    button.addEventListener('click', () => {
                        this.input.value = option;
                        this.sendMessage();
                        followUpDiv.remove();
                    });
                    
                    button.addEventListener('mouseenter', () => {
                        button.style.background = 'var(--secondary-color)';
                    });
                    
                    button.addEventListener('mouseleave', () => {
                        button.style.background = 'var(--primary-color)';
                    });
                    
                    buttonsWrapper.appendChild(button);
                });
                
                buttonsContainer.appendChild(buttonsWrapper);
                followUpDiv.appendChild(avatar);
                followUpDiv.appendChild(buttonsContainer);
                
                this.messages.appendChild(followUpDiv);
                this.scrollToBottom();
            }

            generateResponse(message) {
                const lowerMessage = message.toLowerCase();
                
                // Find matching knowledge base entry
                for (const [keywords, data] of Object.entries(this.knowledgeBase)) {
                    const keywordList = keywords.split('|');
                    if (keywordList.some(keyword => lowerMessage.includes(keyword))) {
                        return {
                            text: data.response,
                            followUp: data.followUp || []
                        };
                    }
                }
                
                // Default response for unmatched queries
                return {
                    text: "I'd be happy to help you with information about Eagle Harbor! I can tell you about our history, board members, events, amenities, and community life. You can also contact our board directly at (301) 888-2410 or info@eagleharborca.org for specific questions.",
                    followUp: ["Tell me about Eagle Harbor history", "Who are the board members?", "What amenities are available?", "How do I contact the board?"]
                };
            }

            showTyping() {
                this.isTyping = true;
                this.typingIndicator.style.display = 'flex';
                this.typingIndicator.querySelector('.typing-indicator').classList.add('active');
                this.scrollToBottom();
            }

            hideTyping() {
                this.isTyping = false;
                this.typingIndicator.style.display = 'none';
                this.typingIndicator.querySelector('.typing-indicator').classList.remove('active');
            }

            scrollToBottom() {
                setTimeout(() => {
                    this.messages.scrollTop = this.messages.scrollHeight;
                }, 100);
            }
        }

        // Initialize chatbot when page loads
        document.addEventListener('DOMContentLoaded', () => {
            new EagleHarborChatbot();
        });
    </script>
</body>
</html>